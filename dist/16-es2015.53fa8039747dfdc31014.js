(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"3S7Z":function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var s=i("lJxs"),n=i("AytR"),r=i("8Y7J"),a=i("IheW");const o=n.a.apiBaseUrl+"/registry/patients";let p=(()=>{class t{constructor(t){this.http=t}getFacilityDetails(){return JSON.parse(localStorage.getItem("facilityDetails"))}getAllPatients(t=""){return this.http.get(o+t).pipe(Object(s.a)(t=>(t&&(this.patients=t),this.patients)))}getPatientsPagination(t){return this.http.get(t).pipe(Object(s.a)(t=>(t&&(this.patients=t),this.patients)))}addSponsorPermit(t){return this.http.post(`${n.a.apiBaseUrl}/registry/patientsponsors`,t)}requestConsultation(t){return this.http.post(`${n.a.apiBaseUrl}/registry/consultationservicerequests`,t)}getPatientSponsors(t){return this.http.get(`${n.a.apiBaseUrl}/registry/patientsponsors`,{params:{patient_id:`${t}`}})}createWalkIn(t){return this.http.post(`${n.a.apiBaseUrl}/registry/patients`,t)}createPatient(t){return this.http.post(`${n.a.apiBaseUrl}/registry/patients/withfolder`,t).pipe(Object(s.a)(t=>!!t&&t.data))}createAppointment(t){return this.http.post(`${n.a.apiBaseUrl}/registry/appointments`,t).pipe(Object(s.a)(t=>!!t&&t.data))}createNextOfKin(t){return this.http.post(`${n.a.apiBaseUrl}/registry/patientnextofkins`,t).pipe(Object(s.a)(t=>!!t&&t.data))}}return t.ngInjectableDef=r["\u0275\u0275defineInjectable"]({factory:function(){return new t(r["\u0275\u0275inject"](a.c))},token:t,providedIn:"root"}),t})()},Hg4z:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var s=i("jtHE"),n=i("1G5W");function r(t){return function(e){return e.pipe(Object(n.a)(function(t){var e=t;if(e.__componentDestroyed$)return e.__componentDestroyed$;var i=t.ngOnDestroy,n=new s.a;return e.ngOnDestroy=function(){i&&i.apply(t),n.next(!0),n.complete()},e.__componentDestroyed$=n.asObservable()}(t)))}}},szcd:function(t,e,i){"use strict";i.r(e);var s=i("8Y7J");class n{}var r=i("pMnS"),a=i("s7LF"),o=i("Kj3r"),p=i("SxV6"),d=i("B3wD"),c=i("2Vo4"),l=i("Hg4z"),h=i("3S7Z"),m=i("NAv5"),u=i("SVse");class b{constructor(t,e,i,s){this.fb=t,this.recordService=e,this.notificationS=i,this.setupService=s,this.requestForm=this.fb.group({folderNumber:this.fb.control(null,[a.t.minLength(11),a.t.maxLength(12)]),attendanceDate:this.fb.control(new Date,[a.t.required]),clinic:this.fb.control(null,[a.t.required]),consultationService:this.fb.control(null,[a.t.required]),orderType:this.fb.control("INTERNAL",[a.t.required]),billed:this.fb.control(0,[a.t.required]),ccc:this.fb.control(null,[a.t.minLength(5),a.t.maxLength(5)]),qty:this.fb.control({value:1,disabled:!0},[a.t.required,a.t.min(1)]),fee:this.fb.control({value:0,disabled:!0},[a.t.required,a.t.min(.1)])}),this.clinicsloading=new c.a(!1),this.servicesLoading=new c.a(!1),this.sponsorLoading=!1,this.isLoadingData=!1,this.searchInitialized=!1,this.requesting=!1,this.clinics=[],this.services=[],this.message="Please enter a valid folder number to fill this form.",this.patientSponsor={billing_sponsor_name:"Patient",id:0,card_serial_no:null,member_id:null,staff_id:null,billing_sponsor:{id:0,sponsorship_type_name:"Patient"}},this.sponsorPermits=[this.patientSponsor],this.ageUnit="year(s)",this.formatFee=t=>`GHC ${t}`,this.parseFee=t=>t.replace("GHC","")}ngOnInit(){}ngAfterViewInit(){this.folderNoControl.valueChanges.pipe(Object(o.a)(1e3),Object(l.a)(this)).subscribe(t=>{t&&this.folderNoControl.valid?this.getPatient(t):(this.message="Please enter a valid folder number to fill this form.",this.searchInitialized=!1)}),this.clinicControl.valueChanges.pipe(Object(l.a)(this)).subscribe(t=>{this.getClinicServices(t)}),this.billedControl.valueChanges.pipe(Object(l.a)(this)).subscribe(t=>{this.setPrice()}),this.serviceControl.valueChanges.pipe(Object(l.a)(this)).subscribe(t=>{t&&this.getPrice(t)})}ngOnDestroy(){}get folderNoControl(){return this.requestForm.get("folderNumber")}get feeControl(){return this.requestForm.get("fee")}get qtyControl(){return this.requestForm.get("qty")}get clinicControl(){return this.requestForm.get("clinic")}get serviceControl(){return this.requestForm.get("consultationService")}get billedControl(){return this.requestForm.get("billed")}get cccControl(){return this.requestForm.get("ccc")}get attendanceDateControl(){return this.requestForm.get("attendanceDate")}get isInsurance(){const t=this.getSelectedSponsorPermit(this.billedControl.value);return t&&"government insurance"===t.billing_sponsor.sponsorship_type_name.toLocaleLowerCase()?(this.cccControl.setValidators([a.t.required,a.t.minLength(5),a.t.maxLength(5)]),this.cccControl.enable(),!0):(this.cccControl.disable(),this.cccControl.reset(),this.cccControl.clearValidators(),!1)}get isCash(){const t=this.getSelectedSponsorPermit(this.billedControl.value);return!!t&&"patient"===t.billing_sponsor.sponsorship_type_name.toLocaleLowerCase()}getSelectedSponsorPermit(t){const e=this.sponsorPermits.find(e=>e.id===t);return this.permit=e,e||null}getPatient(t){this.isLoadingData=!0,this.searchInitialized=!0,this.recordService.getAllPatients(`/single?folder_no=${t}`).pipe(Object(p.a)()).subscribe(t=>{this.isLoadingData=!1,t.data?(this.patient=t.data,this.appendToForm(),this.getPatientSponsorPermits(this.patient.id),this.getClinics()):(this.message="Folder not found",this.searchInitialized=!1)},t=>{this.message="Folder not found",this.searchInitialized=!1})}disabledDate(t){return!!t&&m.isAfter(t,new Date)}getPatientSponsorPermits(t){this.sponsorLoading=!0,this.recordService.getPatientSponsors(t).pipe(Object(p.a)()).subscribe(t=>{t&&t.data&&this.sponsorPermits.push(...t.data),this.sponsorLoading=!1},t=>{})}getClinics(){this.clinicsloading.next(!0),this.setupService.getClinics().pipe(Object(p.a)()).subscribe(t=>{this.clinics=t.data,this.clinicsloading.next(!1)},t=>{this.clinicsloading.next(!1)})}getClinicServices(t){this.servicesLoading.next(!0),this.setupService.getServicesByClinic(t).pipe(Object(p.a)()).subscribe(t=>{this.services=t.data,this.servicesLoading.next(!1)},t=>{this.servicesLoading.next(!1)})}getPrice(t){this.requesting=!0,this.setupService.getServicePrice(t).pipe(Object(p.a)()).subscribe(t=>{this.servicePrice=t,this.requesting=!1,this.setPrice()})}setPrice(){this.servicePrice&&this.feeControl.patchValue(this.isCash?this.servicePrice.prepaid_amount:this.servicePrice.postpaid_amount)}compareFn(t,e){return t===e}appendToForm(){let t=m.differenceInCalendarYears(new Date,new Date(this.patient.dob));t<1&&(t=m.differenceInMonths(new Date,new Date(this.patient.dob)),this.ageUnit="month(s)",t<1&&(t=m.differenceInCalendarDays(new Date,new Date(this.patient.dob)),this.ageUnit="day(s)")),this.patient.age=t,"Patient"!==this.patient.sponsorship_type_name&&this.billedControl.reset()}cancel(){this.patient=null,this.sponsorPermits=[this.patientSponsor],this.searchInitialized=!1,this.requestForm.reset(),this.requestForm.get("orderType").setValue("INTERNAL"),this.billedControl.setValue(0),this.feeControl.setValue(0),this.qtyControl.setValue(1),this.attendanceDateControl.setValue(new Date)}validateForm(){if(this.requestForm.valid)return!0;for(const t of Object.keys(this.requestForm.controls))this.requestForm.controls[t].invalid&&(this.requestForm.controls[t].markAsDirty(),this.requestForm.controls[t].updateValueAndValidity());return this.requestForm.valid}done(){this.validateForm()&&this.submitForm()}submitForm(){this.requesting=!0;const t=this.processData();this.recordService.requestConsultation(t).subscribe(t=>{this.requesting=!1,this.notificationS.success("Success",`Successfully requested consultation for ${this.patient.folder_no}`),this.cancel()},t=>{console.log(t),this.requesting=!1,this.notificationS.error("Oops",`Failed to request consultation for ${this.patient.folder_no}. Consultation has probably been requested already.`)})}processData(){return{order_type:this.requestForm.get("orderType").value,service_quantity:this.qtyControl.value,service_fee:this.feeControl.value,age:m.differenceInCalendarYears(new Date,new Date(this.patient.dob)),patient_id:this.patient.id,clinic_id:this.clinicControl.value,consultation_service_id:this.serviceControl.value,funding_type_id:this.patient.funding_type_id,sponsorship_type:this.permit.billing_sponsor.sponsorship_type_name,ccc:this.cccControl.value,patient_status:this.patient.reg_status,patient_sponsor_id:0===this.billedControl.value?null:this.billedControl.value,billing_sponsor_id:0===this.billedControl.value?null:this.getSelectedSponsorPermit(this.billedControl.value).billing_sponsor.id,attendance_date:Object(u.B)(this.attendanceDateControl.value,"yyyy-MM-dd HH:mm:ss","en"),card_serial_no:this.permit.card_serial_no,member_id:this.permit.member_id,staff_id:this.permit.staff_id}}}var g=i("0CZq"),f=s["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function v(t){return s["\u0275vid"](0,[(t()(),s["\u0275ted"](-1,null,["\nWork in progress\n"]))],null,null)}function C(t){return s["\u0275vid"](0,[(t()(),s["\u0275eld"](0,0,null,null,1,"app-receipt",[],null,null,null,v,f)),s["\u0275did"](1,4440064,null,0,b,[a.e,h.a,g.f,d.a],null,null)],(function(t,e){t(e,1,0)}),null)}var y=s["\u0275ccf"]("app-receipt",b,C,{},{},[]),_=i("EdU/"),S=i("/Yna"),q=i("JRKe"),P=i("Ed4d"),F=i("8WaK"),D=i("QfCi"),O=i("CghO"),w=i("Sq/J"),z=i("5VGP"),j=i("QQfA"),I=i("IP0z"),L=i("POq0"),N=i("PQ0Y"),A=i("iInd"),x=i("eRTK");const R={title:"Receipts"};class V{}var k=i("/HVE"),B=i("v1Dh"),T=i("66zS"),H=i("5Izy"),$=i("yTpB"),J=i("zMNK"),U=i("hOhj"),M=i("r19J"),Y=i("anqq"),E=i("IYs4"),G=i("EcpC"),K=i("GaVp"),W=i("/L1H"),Z=i("phDe"),Q=i("rJp6"),X=i("Rgb0"),tt=i("kS4m"),et=i("mW00"),it=i("jTf7"),st=i("WPSl"),nt=i("YdS3"),rt=i("wQFA"),at=i("px0D"),ot=i("3ZFI"),pt=i("CYS+"),dt=i("oBm0"),ct=i("A7zk"),lt=i("YRt3"),ht=i("lAiz"),mt=i("ce6n"),ut=i("SBNi"),bt=i("iC8E"),gt=i("7QIX"),ft=i("tYkK"),vt=i("wf2+"),Ct=i("eCGT"),yt=i("nHXS"),_t=i("fb/r"),St=i("zTFG"),qt=i("JK0T"),Pt=i("JXeA"),Ft=i("NFMk"),Dt=i("qU0y"),Ot=i("vZsH"),wt=i("W4B1"),zt=i("SHEi"),jt=i("FPpa"),It=i("RVNi"),Lt=i("NDed"),Nt=i("5A4h"),At=i("N2O2"),xt=i("ozKM"),Rt=i("OvZZ"),Vt=i("z+yo"),kt=i("DQmg"),Bt=i("haRT"),Tt=i("1+nf"),Ht=i("XFzh"),$t=i("p+Sl"),Jt=i("HhpN"),Ut=i("SN7N"),Mt=i("fwnu"),Yt=i("VbP7"),Et=i("gaRz"),Gt=i("e15G"),Kt=i("1v46"),Wt=i("wjv3"),Zt=i("bse0"),Qt=i("PCNd");i.d(e,"AccountsModuleNgFactory",(function(){return Xt}));var Xt=s["\u0275cmf"](n,[],(function(t){return s["\u0275mod"]([s["\u0275mpd"](512,s.ComponentFactoryResolver,s["\u0275CodegenComponentFactoryResolver"],[[8,[r.a,y,_.a,_.b,S.a,q.a,P.a,F.a,D.a,O.a,w.a]],[3,s.ComponentFactoryResolver],s.NgModuleRef]),s["\u0275mpd"](4608,u.p,u.o,[s.LOCALE_ID,[2,u.L]]),s["\u0275mpd"](5120,z.x,z.J,[u.d,[3,z.x]]),s["\u0275mpd"](4608,j.d,j.d,[j.k,j.f,s.ComponentFactoryResolver,j.i,j.g,s.Injector,s.NgZone,u.d,I.b,[2,u.i]]),s["\u0275mpd"](5120,j.l,j.m,[j.d]),s["\u0275mpd"](4608,a.v,a.v,[]),s["\u0275mpd"](4608,L.c,L.c,[]),s["\u0275mpd"](4608,a.e,a.e,[]),s["\u0275mpd"](4608,N.a,N.a,[]),s["\u0275mpd"](4608,g.f,g.f,[z.y,j.d,s.Injector,s.ComponentFactoryResolver,s.ApplicationRef]),s["\u0275mpd"](1073742336,u.c,u.c,[]),s["\u0275mpd"](1073742336,A.q,A.q,[[2,A.v],[2,A.m]]),s["\u0275mpd"](1073742336,V,V,[]),s["\u0275mpd"](1073742336,k.b,k.b,[]),s["\u0275mpd"](1073742336,B.a,B.a,[]),s["\u0275mpd"](1073742336,T.b,T.b,[]),s["\u0275mpd"](1073742336,z.j,z.j,[]),s["\u0275mpd"](1073742336,H.b,H.b,[]),s["\u0275mpd"](1073742336,$.a,$.a,[]),s["\u0275mpd"](1073742336,I.a,I.a,[]),s["\u0275mpd"](1073742336,J.e,J.e,[]),s["\u0275mpd"](1073742336,U.g,U.g,[]),s["\u0275mpd"](1073742336,j.h,j.h,[]),s["\u0275mpd"](1073742336,a.u,a.u,[]),s["\u0275mpd"](1073742336,a.k,a.k,[]),s["\u0275mpd"](1073742336,z.u,z.u,[]),s["\u0275mpd"](1073742336,M.a,M.a,[]),s["\u0275mpd"](1073742336,Y.b,Y.b,[]),s["\u0275mpd"](1073742336,E.a,E.a,[]),s["\u0275mpd"](1073742336,L.d,L.d,[]),s["\u0275mpd"](1073742336,G.a,G.a,[]),s["\u0275mpd"](1073742336,z.G,z.G,[]),s["\u0275mpd"](1073742336,K.c,K.c,[]),s["\u0275mpd"](1073742336,z.v,z.v,[]),s["\u0275mpd"](1073742336,W.c,W.c,[]),s["\u0275mpd"](1073742336,Z.h,Z.h,[]),s["\u0275mpd"](1073742336,Z.a,Z.a,[]),s["\u0275mpd"](1073742336,Z.e,Z.e,[]),s["\u0275mpd"](1073742336,Q.c,Q.c,[]),s["\u0275mpd"](1073742336,X.c,X.c,[]),s["\u0275mpd"](1073742336,tt.d,tt.d,[]),s["\u0275mpd"](1073742336,et.c,et.c,[]),s["\u0275mpd"](1073742336,it.h,it.h,[]),s["\u0275mpd"](1073742336,st.f,st.f,[]),s["\u0275mpd"](1073742336,nt.d,nt.d,[]),s["\u0275mpd"](1073742336,rt.a,rt.a,[]),s["\u0275mpd"](1073742336,z.r,z.r,[]),s["\u0275mpd"](1073742336,at.d,at.d,[]),s["\u0275mpd"](1073742336,ot.a,ot.a,[]),s["\u0275mpd"](1073742336,pt.c,pt.c,[]),s["\u0275mpd"](1073742336,dt.b,dt.b,[]),s["\u0275mpd"](1073742336,ct.e,ct.e,[]),s["\u0275mpd"](1073742336,lt.b,lt.b,[]),s["\u0275mpd"](1073742336,ht.g,ht.g,[]),s["\u0275mpd"](1073742336,ht.b,ht.b,[]),s["\u0275mpd"](1073742336,mt.c,mt.c,[]),s["\u0275mpd"](1073742336,ut.b,ut.b,[]),s["\u0275mpd"](1073742336,bt.c,bt.c,[]),s["\u0275mpd"](1073742336,bt.b,bt.b,[]),s["\u0275mpd"](1073742336,gt.a,gt.a,[]),s["\u0275mpd"](1073742336,ft.b,ft.b,[]),s["\u0275mpd"](1073742336,vt.g,vt.g,[]),s["\u0275mpd"](1073742336,Ct.b,Ct.b,[]),s["\u0275mpd"](1073742336,yt.a,yt.a,[]),s["\u0275mpd"](1073742336,_t.b,_t.b,[]),s["\u0275mpd"](1073742336,St.d,St.d,[]),s["\u0275mpd"](1073742336,qt.a,qt.a,[]),s["\u0275mpd"](1073742336,Pt.h,Pt.h,[]),s["\u0275mpd"](1073742336,Pt.f,Pt.f,[]),s["\u0275mpd"](1073742336,z.w,z.w,[]),s["\u0275mpd"](1073742336,Ft.h,Ft.h,[]),s["\u0275mpd"](1073742336,Ft.d,Ft.d,[]),s["\u0275mpd"](1073742336,Ft.f,Ft.f,[]),s["\u0275mpd"](1073742336,g.g,g.g,[]),s["\u0275mpd"](1073742336,g.e,g.e,[]),s["\u0275mpd"](1073742336,Dt.a,Dt.a,[]),s["\u0275mpd"](1073742336,Ot.b,Ot.b,[]),s["\u0275mpd"](1073742336,wt.b,wt.b,[]),s["\u0275mpd"](1073742336,zt.c,zt.c,[]),s["\u0275mpd"](1073742336,jt.c,jt.c,[]),s["\u0275mpd"](1073742336,It.b,It.b,[]),s["\u0275mpd"](1073742336,Lt.a,Lt.a,[]),s["\u0275mpd"](1073742336,Nt.a,Nt.a,[]),s["\u0275mpd"](1073742336,At.b,At.b,[]),s["\u0275mpd"](1073742336,xt.a,xt.a,[]),s["\u0275mpd"](1073742336,Rt.a,Rt.a,[]),s["\u0275mpd"](1073742336,Vt.c,Vt.c,[]),s["\u0275mpd"](1073742336,kt.b,kt.b,[]),s["\u0275mpd"](1073742336,Bt.b,Bt.b,[]),s["\u0275mpd"](1073742336,Tt.g,Tt.g,[]),s["\u0275mpd"](1073742336,Ht.a,Ht.a,[]),s["\u0275mpd"](1073742336,$t.a,$t.a,[]),s["\u0275mpd"](1073742336,z.B,z.B,[]),s["\u0275mpd"](1073742336,Jt.a,Jt.a,[]),s["\u0275mpd"](1073742336,Ut.a,Ut.a,[]),s["\u0275mpd"](1073742336,Mt.a,Mt.a,[]),s["\u0275mpd"](1073742336,z.o,z.o,[]),s["\u0275mpd"](1073742336,Yt.a,Yt.a,[]),s["\u0275mpd"](1073742336,Et.d,Et.d,[]),s["\u0275mpd"](1073742336,Gt.a,Gt.a,[]),s["\u0275mpd"](1073742336,Kt.a,Kt.a,[]),s["\u0275mpd"](1073742336,Wt.a,Wt.a,[]),s["\u0275mpd"](1073742336,Zt.d,Zt.d,[]),s["\u0275mpd"](1073742336,a.s,a.s,[]),s["\u0275mpd"](1073742336,Qt.a,Qt.a,[]),s["\u0275mpd"](1073742336,n,n,[]),s["\u0275mpd"](1024,A.k,(function(){return[[{path:"receipt",component:b,canActivate:[x.a],data:R}]]}),[]),s["\u0275mpd"](256,Pt.b,{nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24},[]),s["\u0275mpd"](256,g.b,{nzTop:"24px",nzBottom:"24px",nzPlacement:"topRight",nzDuration:4500,nzMaxStack:7,nzPauseOnHover:!0,nzAnimate:!0},[])])}))}}]);