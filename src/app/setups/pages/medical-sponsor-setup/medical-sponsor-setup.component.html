<div nz-row nzGutter="10">
  <nz-col nzSpan="12">
    <nz-card>
      <nz-list style="min-height: 350px;" [nzDataSource]="list" [nzItemLayout]="'horizontal'" [nzLoading]="initLoading"
        [nzRenderItem]="item">
        <ng-template #item let-item>
          <nz-list-item [nzActions]="item.loading ? [] : [deleteAction,editAction, moreAction]">
            <nz-skeleton [nzActive]="true" [nzTitle]="false" [nzLoading]="item.loading">
              <ng-template #editAction><a (click)="showModal(item)">edit</a></ng-template>
              <ng-template #deleteAction>
                <a nz-popconfirm nzPopconfirmTitle="Are you sure delete this?" nzPopconfirmPlacement="bottom"
                  (nzOnConfirm)="deleteMedicalSponsor(item)"><i nz-icon nzType="delete" nzTheme="fill"
                    style="color:red;font-size: 16px;"></i></a>
              </ng-template>
              <ng-template #moreAction>
                <nz-switch [(ngModel)]="item.isActivated" (ngModelChange)="toggleItem($event, item)"></nz-switch>
              </ng-template>
              <nz-list-item-meta [nzTitle]="nzTitle" [nzDescription]="nzDesc">
                <ng-template #nzTitle>
                  <a>{{ item.name }}</a>
                </ng-template>
                <ng-template #nzDesc>
                  <div>{{ item.staff_category_name }}</div>
                  <div>{{ item.billing_system_name }}</div>
                  <div>{{ item.billing_cycle_name }}</div>
                  <div>{{ item.payment_style_name }}</div>
                </ng-template>
              </nz-list-item-meta>
            </nz-skeleton>
          </nz-list-item>
        </ng-template>
      </nz-list>
    </nz-card>
    <nz-modal [(nzVisible)]="isVisible" (nzOnCancel)="closeModal()" [nzTitle]="modalTitle" [nzContent]="modalContent"
      [nzFooter]="modalFooter">
      <ng-template #modalTitle>
        Update Medidical Sponsor
      </ng-template>
      <ng-template #modalContent>
        <form [formGroup]="updateForm">
          <nz-alert *ngIf="modalError" nzType="error" [nzMessage]="modalError" class="m-b-10" nzShowIcon>
          </nz-alert>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="name">Name</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input type="text" nz-input formControlName="name" name="name" placeholder="Input sponsor name" />
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="active_cell">Active Cell</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input type="text" nz-input formControlName="active_cell" name="active_cell"
                  placeholder="Active cell (Required)" />
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="alternate_cell">Alternate Cell</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input type="text" nz-input formControlName="alternate_cell" name="alternate_cell"
                  placeholder="Alternate Cell" />
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="address">Address</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input type="text" nz-input formControlName="address" name="address" placeholder="Input address" />
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="email1">Email</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input type="text" nz-input formControlName="email1" name="email1" placeholder="Input Email" />
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="email2">Alternate Email</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input type="text" nz-input formControlName="email2" name="email2"
                  placeholder="Input Alternate Email" />
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="website">Website</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input type="text" nz-input formControlName="website" name="website" placeholder="Input website" />
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="sponsor_code">Sponsor Code </nz-form-label>
              <nz-form-control [nzSpan]="16">
                <input type="text" nz-input formControlName="sponsor_code" name="sponsor_code"
                  placeholder="Sponsor Code (Required)" />
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="sponsorship_type_id">Sponsorship Type</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Sponsorship Type (Required)" style="width:100%;"
                  formControlName="sponsorship_type_id" [nzLoading]="sponsorshipTypesLoading | async">
                  <nz-option *ngFor="let sponsorshipType of sponsorshipTypes" [nzValue]="sponsorshipType.id"
                    [nzLabel]="sponsorshipType.name"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="billing_system_id">Billing System</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Billing System (Required)" style="width:100%;"
                  formControlName="billing_system_id" name="billing_system_id"
                  [nzLoading]="billingSystemsLoading | async">
                  <nz-option *ngFor="let billingSystem of billingSystems" [nzValue]="billingSystem.id"
                    [nzLabel]="billingSystem.name"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="billing_cycle_id">Billing Cycle</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Billing Cycle (Required)" style="width:100%;"
                  formControlName="billing_cycle_id" name="billing_cycle_id" [nzLoading]="billingCyclesLoading | async">
                  <nz-option *ngFor="let billingCycle of billingCycles" [nzValue]="billingCycle.id"
                    [nzLabel]="billingCycle.name"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="payment_style_id">Payment Style</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Payment Style (Required)" style="width:100%;"
                  formControlName="payment_style_id" [nzLoading]="paymentStylesLoading | async">
                  <nz-option *ngFor="let paymentStyle of paymentStyles" [nzValue]="paymentStyle.id"
                    [nzLabel]="paymentStyle.name"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </nz-row>
          <nz-row>
            <nz-form-item>
              <nz-form-label [nzXs]="8" nzRequired nzFor="payment_channel_id">Payment Channel</nz-form-label>
              <nz-form-control [nzSpan]="16">
                <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Payment Channel (Required)" style="width:100%;"
                  formControlName="payment_channel_id" [nzLoading]="paymentChannelsLoading | async">
                  <nz-option *ngFor="let paymentChannel of paymentChannels" [nzValue]="paymentChannel.id"
                    [nzLabel]="paymentChannel.name"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </nz-row>
        </form>
      </ng-template>

      <ng-template #modalFooter>
        <button nz-button (click)="closeModal()">Cancel</button>
        <button nz-button nzType="primary" (click)="update()" [nzLoading]="isUpdatingMedicalSponsor|async">Save</button>
      </ng-template>
    </nz-modal>
  </nz-col>
  <nz-col nzSpan="8">
    <nz-card>
      <h5>Create Medical Sponsor</h5>
      <form [formGroup]="medicalSponsorForm" (ngSubmit)="submitForm()">

        <nz-alert *ngIf="error" nzType="error" nzMessage="Error" class="m-b-10" [nzDescription]="error" nzShowIcon>
        </nz-alert>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <input type="text" nz-input formControlName="name" placeholder="Sponsor name (Required)" />
          </nz-form-control>
        </nz-row>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <input type="text" nz-input formControlName="active_cell" placeholder="Active cell (Required)" />
          </nz-form-control>
        </nz-row>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <input type="text" nz-input formControlName="alternate_cell" placeholder="Alternate cell" />
          </nz-form-control>

        </nz-row>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <input type="text" nz-input formControlName="address" placeholder="Address" />
          </nz-form-control>

        </nz-row>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <input type="text" nz-input formControlName="email1" placeholder="Email" />
          </nz-form-control>

        </nz-row>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <input type="text" nz-input formControlName="email2" placeholder="Alternate email" />
          </nz-form-control>

        </nz-row>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <input type="text" nz-input formControlName="website" placeholder="Website" />
          </nz-form-control>

        </nz-row>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <input type="text" nz-input formControlName="sponsor_code" placeholder="Sponsor code (Required)" />
          </nz-form-control>
        </nz-row>

        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Sponsorship Type (Required)" style="width:100%;"
              formControlName="sponsorship_type_id" [nzLoading]="sponsorshipTypesLoading | async">
              <nz-option *ngFor="let sponsorshipType of sponsorshipTypes" [nzValue]="sponsorshipType.id"
                [nzLabel]="sponsorshipType.name"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-row>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Billing System (Required)" style="width:100%;"
              formControlName="billing_system_id" [nzLoading]="billingSystemsLoading | async">
              <nz-option *ngFor="let billingSystem of billingSystems" [nzValue]="billingSystem.id"
                [nzLabel]="billingSystem.name"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-row>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Billing Cycle (Required)" style="width:100%;"
              formControlName="billing_cycle_id" [nzLoading]="billingCyclesLoading | async">
              <nz-option *ngFor="let billingCycle of billingCycles" [nzValue]="billingCycle.id"
                [nzLabel]="billingCycle.name"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-row>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Payment Style (Required)" style="width:100%;"
              formControlName="payment_style_id" [nzLoading]="paymentStylesLoading | async">
              <nz-option *ngFor="let paymentStyle of paymentStyles" [nzValue]="paymentStyle.id"
                [nzLabel]="paymentStyle.name"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-row>
        <nz-row class="m-b-10">
          <nz-form-control [nzSpan]="24">
            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Payment Channel (Required)" style="width:100%;"
              formControlName="payment_channel_id" [nzLoading]="paymentChannelsLoading | async">
              <nz-option *ngFor="let paymentChannel of paymentChannels" [nzValue]="paymentChannel.id"
                [nzLabel]="paymentChannel.name"></nz-option>
            </nz-select>
          </nz-form-control>

          <nz-form-control nzSpan="24" style="text-align: right;" class="m-t-10">
            <button nz-button nzType="primary" type="submit" [nzLoading]="isCreatingMedicalSponsor | async">
              Submit
            </button>
          </nz-form-control>
        </nz-row>
      </form>
    </nz-card>
  </nz-col>
</div>
